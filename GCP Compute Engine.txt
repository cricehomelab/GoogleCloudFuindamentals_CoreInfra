GCP Compute Engine

Virtual Machine instances for VMs are supplied by Compute Engine. 

Some weird perks that can happen.
1. Micro VM shares cpu with other vms
2. Burst capability can run briefly above its rated CPU


Compute Engine
- Infrastructure as a Service (IaaS)
- Predefined or custom Machine types.
- vCPUs(cores) and Memory (RAM)
- Storage
	- Zonal or Regional Persistant Disk (HDD or SSD)
	- Local SSD
	- Cloud Storage
- Networking
- Linux or Windows

Compute Engine Features
- Machine Right sizing
	- Recomendation engine for optimum machine settings
	- Cloud Monitoring Statistics
	- New Recommendation 24 hours after VM create, or resize
- Instance Metadata
- Startup Scripts
- Availability Policies
	- Live Migrate
	- Auto Restart
-Global load balancing
	- Multiple regions for availability
- OS Patch Management
	- Create Patch approvals
	- Set up Flexible scheduling
	- Apply advanced patch configuration settings
- Per second billing
- Sustained use discounts
- commited use discounts
- Pre-emptible
	- PRO up to an 80% discounts
	- CON no SLA
	
Compute options
- Several machine types
	- Network throughput scales 2Gbps per vCPU (some small exceptions)
	- Theoretical max of 32 Gbps with 16 vCPU or 100 Gbps with T4 or V100 GPUs
- 1 vCPU = 1 hardware hyper-thread
- available cpu platforms
	- https://cloud.google.com/compute/docs/cpu-platforms

Disk Options
- Standard, SSD, or local SSD
- Standard and SSD PDs scale in performance for each GB of space allocated
- Able to resize disks or migrate instances with no downtime. 

Networking
- Robust Network Features
	- Default Custom Networks
	- Inbound/outbound firewall rules
		- ip based
		- instance/group tags
	- Regional HTTPS load balancing
	- Network Load balancing
		- Does not require pre-warming
	- Global and multi regional subnetworks.


VM Access and Lifecycle

For accessing a VM the creator has full root privilages on that instance.

VM access Linux (SSH) 
	- SSH from Cloud Console or Cloudshell via Cloud SDK
	- SSH from computer othird party client and Generate Key pair
	- Requires Firewall rule to allow TCP:22

VM Access Windows (RDP)
	- RDP Clients
	- Powershell Terminal
	- requires setting the windows password
	- requires firewall rule to allow tcp:3389

VM Lifecycle
1. Provisioning
	A. vCPUs + Memory
	B. Root disk / persistant disk
	C. Additonal Disks
2. Staging
	A. IP addresses (Internal/External)
	B. System Image
	C. Boot
3. Running ---> Able to Reset the VM. 
	A. Startup script
	B. Access SSH/RDP
	C. Modify Use
		a. Set/get Metadata
		b. Export System Image
		c. Snapshot persistant disk
		d. move VM to a different zone  ------> Live Migrate
	E. Stopping 
		a. Shutdown Scripts
	F. Terminated
		a. Delete
		b. Avaialable policy (this loops back to Provisioning).
			1. Able to restart the unit. 
	
Availability policy
- Scheduling options
- Automatic restart	
	- Automatic restart due to crash/maintenance event
		- Not pre-emption or a user initiated termination
- On host Maintenance
	- Determines whether host is live migrated or terminated due to a maintenance event, live migration is the default
- Live Migration
	- During maintenance event VM is migrated to a different hardware without interruption
	- Metadata indicates occurance of live migration. 

Patch Management
- Able to manage patches through GCloud
	- Keep Infrastructure up to date
	- Reduce risk of security vulnerabilities
- OS Patch Management
	- Patch Compliance reporting
	- Patch Deployment

Patch Management functions
- Create patch approvals
- set up flexible scheduling
- apply advanced patch config settings
- Manage patch jobs or updates from a centralized location.

Stopped or terminated VM
- No charge for a stopped VM
- you are charged for attached disks/reserved IP addresses. 
- Actions that can be taken while stopped	
	- Change Machine type
	- Migrate the VM instance to another network
	- Add or remove attached disks; change auto delete settings
	- modify instance tags
	- Modify custom VM or project wide metadata
	- Remove or set a new static IP
	- Modify VM availability policy
	- CANNOT change the image of a stopped VM.


























